# ä¿®å¤å®Œæˆæ€»ç»“

## å·²ä¿®å¤çš„é”™è¯¯

### âœ… 1. QHBoxLayout æœªå®šä¹‰é”™è¯¯

**é”™è¯¯**: `NameError: name 'QHBoxLayout' is not defined`

**ä½ç½®**: `src/ui/tabs/plotting_settings_tab.py`

**ä¿®å¤**: åœ¨å¯¼å…¥è¯­å¥ä¸­æ·»åŠ äº† `QHBoxLayout`

```python
from PyQt6.QtWidgets import (
    QWidget, QVBoxLayout, QHBoxLayout, QGridLayout, QFormLayout,
    ...
)
```

### âœ… 2. x_min_phys_input å±æ€§ä¸å­˜åœ¨é”™è¯¯

**é”™è¯¯**: `AttributeError: 'SpectraConfigDialog' object has no attribute 'x_min_phys_input'`

**ä½ç½®**: `src/ui/main_window.py` å’Œ `src/ui/panels/cos_panel.py`

**ä¿®å¤**: 
- åœ¨ `_create_plotting_tab_content()` ä¸­æ·»åŠ äº†æ§ä»¶å±æ€§æ˜ å°„
- åœ¨æ‰€æœ‰è®¿é—® `x_min_phys_input` å’Œ `x_max_phys_input` çš„åœ°æ–¹æ·»åŠ äº†å®‰å…¨æ£€æŸ¥
- æ·»åŠ äº† `_ensure_tabs_initialized()` æ–¹æ³•ï¼Œç¡®ä¿æ‰€æœ‰ Tab åœ¨è®¿é—®æ§ä»¶å‰å·²åˆ›å»º

### âœ… 3. nmf_mode_regression å±æ€§ä¸å­˜åœ¨é”™è¯¯

**é”™è¯¯**: `AttributeError: 'SpectraConfigDialog' object has no attribute 'nmf_mode_regression'`

**ä½ç½®**: `src/ui/main_window.py` çš„ `run_nmf_button_handler()` æ–¹æ³•

**ä¿®å¤**: 
- æ·»åŠ äº†å®‰å…¨æ£€æŸ¥ï¼Œç¡®ä¿æ§ä»¶å­˜åœ¨åå†è®¿é—®
- åœ¨ `_ensure_tabs_initialized()` ä¸­ç¡®ä¿ NMF Tab å·²åˆ›å»º

### âœ… 4. QLayout è­¦å‘Š

**è­¦å‘Š**: `QLayout: Cannot add a null widget to QVBoxLayout`

**åŸå› **: Tab åˆå§‹åŒ–å¤±è´¥å¯¼è‡´è¿”å› None

**ä¿®å¤**: 
- æ”¹è¿›äº†é”™è¯¯å¤„ç†
- ç¡®ä¿ Tab åˆ›å»ºå¤±è´¥æ—¶ä¸ä¼šå¯¼è‡´ç¨‹åºå´©æºƒ

## ä¿®æ”¹çš„æ–‡ä»¶

1. **src/ui/tabs/plotting_settings_tab.py**
   - æ·»åŠ äº† `QHBoxLayout` å¯¼å…¥
   - ç§»é™¤äº† `_create_h_layout` ä¸­çš„é‡å¤å¯¼å…¥

2. **src/ui/main_window.py**
   - åœ¨ `_create_plotting_tab_content()` ä¸­æ·»åŠ äº†æ§ä»¶å±æ€§æ˜ å°„
   - æ·»åŠ äº† `_ensure_tabs_initialized()` æ–¹æ³•
   - åœ¨æ‰€æœ‰è®¿é—® Tab æ§ä»¶çš„åœ°æ–¹æ·»åŠ äº†å®‰å…¨æ£€æŸ¥
   - ä¿®å¤äº† `run_nmf_button_handler()` ä¸­çš„æ§ä»¶è®¿é—®

3. **src/ui/panels/cos_panel.py**
   - æ·»åŠ äº† `x_min_phys_input` å’Œ `x_max_phys_input` çš„å®‰å…¨æ£€æŸ¥

## æµ‹è¯•å»ºè®®

ç¨‹åºå·²åœ¨åå°è¿è¡Œï¼Œè¯·è¿›è¡Œä»¥ä¸‹æµ‹è¯•ï¼š

1. **åŸºç¡€åŠŸèƒ½**
   - âœ… ç¨‹åºåº”è¯¥èƒ½æ­£å¸¸å¯åŠ¨
   - âœ… ä¸»çª—å£åº”è¯¥æ­£å¸¸æ˜¾ç¤º
   - âœ… å„ä¸ªåŠŸèƒ½æŒ‰é’®åº”è¯¥æ­£å¸¸å·¥ä½œ

2. **Tab åŠŸèƒ½**
   - ç‚¹å‡» "ğŸ“Š ç»˜å›¾ä¸é¢„å¤„ç†" æŒ‰é’®ï¼Œæ£€æŸ¥ Tab æ˜¯å¦æ­£å¸¸æ‰“å¼€
   - ç‚¹å‡» "ğŸ“ æ–‡ä»¶æ‰«æä¸ç‹¬ç«‹Yè½´" æŒ‰é’®ï¼Œæ£€æŸ¥ Tab æ˜¯å¦æ­£å¸¸æ‰“å¼€
   - ç‚¹å‡» "ğŸ“ˆ æ³¢å³°æ£€æµ‹" æŒ‰é’®ï¼Œæ£€æŸ¥ Tab æ˜¯å¦æ­£å¸¸æ‰“å¼€
   - ç‚¹å‡» "âš›ï¸ ç‰©ç†éªŒè¯" æŒ‰é’®ï¼Œæ£€æŸ¥ Tab æ˜¯å¦æ­£å¸¸æ‰“å¼€

3. **NMF åˆ†æ**
   - ç‚¹å‡» "ğŸ”¬ NMFåˆ†æ" æŒ‰é’®ï¼Œæ£€æŸ¥ Tab æ˜¯å¦æ­£å¸¸æ‰“å¼€
   - æ£€æŸ¥æœ€å¤§è¿­ä»£æ¬¡æ•°æ˜¯å¦ä¸º 500
   - æ£€æŸ¥æ˜¯å¦æœ‰æ”¶æ•›å®¹å·®å‚æ•°ï¼ˆtolï¼‰
   - è¿è¡Œ NMF åˆ†æï¼Œæ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ”¶æ•›è­¦å‘Š

4. **ç»˜å›¾åŠŸèƒ½**
   - é€‰æ‹©æ–‡ä»¶å¤¹
   - ç‚¹å‡» "â–¶ï¸ è¿è¡Œç»˜å›¾" æŒ‰é’®ï¼Œæ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸ç»˜å›¾
   - æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å±æ€§é”™è¯¯

5. **ç»„ç€‘å¸ƒå›¾**
   - ç‚¹å‡» "ğŸ“‰ ç»˜åˆ¶ç»„é—´å¹³å‡å¯¹æ¯” (ç€‘å¸ƒå›¾)" æŒ‰é’®
   - æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ

6. **2D-COS åˆ†æ**
   - ç‚¹å‡» "ğŸ“ è¿è¡Œ 2D-COS" æŒ‰é’®
   - æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ

## æ³¨æ„äº‹é¡¹

- æ‰€æœ‰ Tab æ§ä»¶ç°åœ¨é€šè¿‡å±æ€§æ˜ å°„æ·»åŠ åˆ°ä¸»çª—å£ï¼Œç¡®ä¿å…¼å®¹æ€§
- æ·»åŠ äº†å®‰å…¨æ£€æŸ¥ï¼Œé¿å…å±æ€§ä¸å­˜åœ¨é”™è¯¯
- å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯

